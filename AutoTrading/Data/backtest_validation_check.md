# 백테스트 미래 참조(Look-ahead Bias) 검증

## 검증 항목

### 1. 지표 계산
- ✅ EMA, RSI, ATR: 전체 데이터 한번에 계산하지만, 각 시점에서 과거 데이터만 사용
- ✅ `shift(1)`: 과거 데이터 참조 (미래 참조 아님)
- ✅ `rolling()`: 과거 윈도우만 사용

### 2. 진입 신호 확인
- ✅ `check_entry_signal(prev_row, ...)`: 이전 봉(prev_row) 기준으로 신호 확인
- ✅ `row['close']` 사용: 함수 내부에서 `row`는 `prev_row`이므로, 이전 봉의 종가 확인 (올바름)
- ✅ 다음 봉의 시가(`row['open']`)로 진입: 올바름

### 3. 청산 확인
- ✅ 현재 봉의 고가/저가로 손절/익절 확인: 올바름
- ✅ 체결 가능한 가격 범위 내에서 체결: 올바름

### 4. 가능한 문제점
- ⚠️ 지표 계산이 전체 데이터를 한번에 계산: 실제로는 각 시점에서만 과거 데이터 사용해야 함
  - 하지만 일반적인 백테스트 방식이고, 지표 계산 로직이 올바르면 문제 없음
- ✅ 모든 신호 확인이 과거 봉 기준
- ✅ 진입 가격이 다음 봉 시가
- ✅ 청산 가격이 현재 봉 고가/저가 범위 내

## 결론
현재 코드는 Look-ahead bias를 방지하고 있습니다.

